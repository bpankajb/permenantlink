<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <script>
      // Adding timestamp to prevent caching issues
      const timestamp = new Date().getTime();

      // Fetching the config.json file dynamically to avoid caching (timestamp appended)
      fetch(`config.json?t=${timestamp}`) 
        .then(response => response.json()) // Parsing the response as JSON
        .then(data => {
          // Extract the redirect URL from config.json
          const redirectUrl = data.redirectUrl; 
          
          // Fetch the redirection URL from the backend API
          fetch(redirectUrl) 
            .then(response => response.json()) // Backend returns a JSON with the final URL
            .then(redirectData => {
              // Perform the redirection by updating the window location
              window.location.href = redirectData.url;
            })
            .catch(error => {
              console.error("Error fetching redirect URL:", error);
              // If there's an issue fetching the URL, display an error message with a clickable link
              document.body.innerHTML = `
                <h1>Something went wrong</h1>
                <p>If you are not redirected, please <a href="${redirectUrl}" target="_blank">click here</a> to go to the destination.</p>
              `;
            });
        })
        .catch(error => {
          console.error("Error fetching config:", error);
          // If there's an issue fetching config.json, display an error message with a clickable link
          document.body.innerHTML = `
            <h1>Something went wrong</h1>
            <p>If you are not redirected, please <a href="${redirectUrl}" target="_blank">click here</a> to go to the destination.</p>
          `;
        });
    </script>
</head>
<body>
    <p>If you are not redirected, please wait or contact support.</p>
</body>
</html>
